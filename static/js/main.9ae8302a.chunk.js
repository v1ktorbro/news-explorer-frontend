(this["webpackJsonpnews-explorer-frontend"]=this["webpackJsonpnews-explorer-frontend"]||[]).push([[0],Array(20).concat([function(e,t,n){},,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/github_icon.140f0007.svg"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/facebook_icon.4c3c64e4.svg"},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(21),i=n.n(r),c=n(4),o=(n(28),n(2)),l=(n(29),n(3)),u=(n(30),n(0));var d=function(e){var t=e.onMain,n=e.children;return Object(u.jsxs)("header",{className:t?"header header_main":"header",children:[Object(u.jsx)(c.b,{to:"/",className:t?"header__logo header__logo_main":"header__logo",children:"NewsExplorer"}),Object(u.jsx)("span",{className:t?"header__burger-menu header__burger-menu_main":"header__burger-menu",onClick:function(){var e=document.querySelector(".header_main"),t=document.querySelector(".navigation");e&&(e.classList.toggle("header_state-blind"),t.classList.add("navigation_black-blind")),t.classList.toggle("navigation_open-blind"),document.querySelector(".header__burger-menu").classList.toggle("header__burger-menu_active")}}),n]})},_=(n(37),n.p+"static/media/logout_black.5b51cd51.svg"),h=n.p+"static/media/logout_white.26565a3f.svg",j=s.a.createContext();var m=function(e){var t=e.onMain,n=e.loggedIn,a=e.onLogin,r=e.savedNews,i=e.signOut,o=s.a.useContext(j);return Object(u.jsxs)("nav",{className:"navigation",children:[Object(u.jsx)(c.c,{exact:!0,to:"/",className:t?"navigation__link navigation__link_main":"navigation__link",activeClassName:t?"navigation__link_active-main":"navigation__link_active",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),n&&Object(u.jsx)(c.c,{to:"/saved-news",className:t?"navigation__link navigation__link_main":"navigation__link",activeClassName:t?"navigation__link_active-main":"navigation__link_active",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"}),Object(u.jsxs)("button",{type:"button",name:"logout",onClick:n?i:a,className:n&&r?"navigation__btn-logout":"navigation__btn-login",children:[n?o.name:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f",n&&Object(u.jsx)("img",{className:"navigation__image-logout",alt:"\u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430 logout",src:r?_:h})]})]})};n(38),n(39);var b=function(e){var t=e.onSearchNews,n=s.a.useRef(),a=s.a.useState(""),r=Object(o.a)(a,2),i=r[0],c=r[1],l=function(e,t){e.classList.remove("search-form__input_type-error"),t.classList.remove("search-form__input-error_active")};return Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),document.querySelector(".search-form__btn-search").disabled=!0,t(i)},noValidate:!0,className:"search-form",children:[Object(u.jsx)("input",{ref:n,required:!0,minLength:"3",onBlur:function(e){!function(e){var t=document.querySelector(".search-form"),n=t.querySelector(".search-form__input"),a=t.querySelector("#".concat(n.id,"-error")),s=t.querySelector(".search-form__btn-search");l(n,a),s.classList.remove("search-form__btn-search_inactive"),a.textContent="",n.value=""}()},onChange:function(e){!function(e){var t=document.querySelector(".search-form"),n=t.querySelector(".search-form__input"),a=t.querySelector("#".concat(n.id,"-error")),s=t.querySelector(".search-form__btn-search");c(e.target.value),e.target.validity.valid?(l(n,a),s.classList.remove("search-form__btn-search_inactive"),a.textContent="",s.disabled=!1):(function(e,t){e.classList.add("search-form__input_type-error"),t.classList.add("search-form__input-error_active")}(n,a),s.classList.add("search-form__btn-search_inactive"),s.disabled=!0),e.target.validity.valueMissing?a.textContent="\u041d\u0443\u0436\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e":a.textContent=n.validationMessage}(e)},type:"text",className:"search-form__input",id:"search-input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043c\u0443 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}),Object(u.jsx)("span",{className:"search-form__input-error",id:"search-input-error"}),Object(u.jsx)("button",{disabled:!0,type:"submit",className:"search-form__btn-search",children:"\u0418\u0441\u043a\u0430\u0442\u044c"})]})};var p=function(e){var t=e.onSearchNews;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("main",{className:"main",id:"main",children:[Object(u.jsx)("h1",{className:"main__title",children:"\u0427\u0442\u043e \u0442\u0432\u043e\u0440\u0438\u0442\u0441\u044f \u0432 \u043c\u0438\u0440\u0435?"}),Object(u.jsx)("p",{className:"main__description",children:"\u041d\u0430\u0445\u043e\u0434\u0438\u0442\u0435 \u0441\u0430\u043c\u044b\u0435 \u0441\u0432\u0435\u0436\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438 \u043d\u0430 \u043b\u044e\u0431\u0443\u044e \u0442\u0435\u043c\u0443 \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0439\u0442\u0435 \u0432 \u0441\u0432\u043e\u0451\u043c \u043b\u0438\u0447\u043d\u043e\u043c \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435."}),Object(u.jsx)(b,{onSearchNews:t})]})})},g=(n(40),n.p+"static/media/author-avatar.925bf41f.png");var f=function(){return Object(u.jsxs)("section",{className:"about",children:[Object(u.jsx)("img",{className:"about__avatar",src:g,alt:"\u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0430"}),Object(u.jsxs)("div",{className:"about__text",children:[Object(u.jsx)("h2",{className:"about__title",children:"\u041e\u0431 \u0430\u0432\u0442\u043e\u0440\u0435"}),Object(u.jsxs)("div",{className:"about__description",children:[Object(u.jsx)("p",{className:"about__author",children:"\u042d\u0442\u043e \u0431\u043b\u043e\u043a \u0441 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u043c \u0430\u0432\u0442\u043e\u0440\u0430 \u043f\u0440\u043e\u0435\u043a\u0442\u0430. \u0417\u0434\u0435\u0441\u044c \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0443\u043a\u0430\u0437\u0430\u0442\u044c, \u043a\u0430\u043a \u0432\u0430\u0441 \u0437\u043e\u0432\u0443\u0442, \u0447\u0435\u043c \u0432\u044b \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442\u0435\u0441\u044c, \u043a\u0430\u043a\u0438\u043c\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u044f\u043c\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0432\u043b\u0430\u0434\u0435\u0435\u0442\u0435."}),Object(u.jsx)("p",{className:"about__author",children:"\u0422\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u0430\u0442\u044c \u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u0432 \u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c\u0435, \u0447\u0435\u043c\u0443 \u0432\u044b \u0442\u0443\u0442 \u043d\u0430\u0443\u0447\u0438\u043b\u0438\u0441\u044c, \u0438 \u0447\u0435\u043c \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u043c\u043e\u0447\u044c \u043f\u043e\u0442\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u043c \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430\u043c."})]})]})]})},O=(n(41),n(23)),v=n(42),x=n(43);var N=function(){return Object(u.jsxs)("footer",{className:"footer",children:[Object(u.jsx)("p",{className:"footer__signature",children:"\xa9 2020 Supersite, Powered by News API"}),Object(u.jsx)("nav",{className:"footer__links footer__links_string",children:Object(u.jsxs)("ul",{className:"footer__list footer__list_string",children:[Object(u.jsx)("li",{className:"footer__list-item",children:Object(u.jsx)(O.a,{to:"/#main",className:"footer__link",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(u.jsx)("li",{className:"footer__list-item",children:Object(u.jsx)("a",{href:"https://praktikum.yandex.ru/",target:"_blank",rel:"noopener noreferrer",className:"footer__link",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"})})]})}),Object(u.jsx)("nav",{className:"footer__links footer__links_social-icons",children:Object(u.jsxs)("ul",{className:"footer__list footer__list_social-icons",children:[Object(u.jsx)("li",{className:"footer__list-item",children:Object(u.jsx)("a",{href:"https://github.com/v1ktorbro",target:"_blank",rel:"noopener noreferrer",className:"footer__link",children:Object(u.jsx)("img",{src:v,className:"footer__social-icon footer__social-icon_github",alt:"\u043b\u043e\u0433\u043e \u0433\u0438\u0442\u0445\u0430\u0431\u0430"})})}),Object(u.jsx)("li",{className:"footer__list-item",children:Object(u.jsx)("a",{href:"https://www.facebook.com/",target:"_blank",rel:"noopener noreferrer",className:"footer__link",children:Object(u.jsx)("img",{src:x,className:"footer__social-icon footer__social-icon_facebook",alt:"\u043b\u043e\u0433\u043e \u0444\u0435\u0439\u0441\u0431\u0443\u043a\u0430"})})})]})})]})};n(44),n(45);var y=function(e){var t=e.savedCard,n=e.card,a=e.loggedIn,s=e.onArticleSave,r=e.onArticleDelete,i=function(e){return new Intl.DateTimeFormat("ru",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))},c=function(e){return e.target.querySelector(".news-card__hint-login")};return Object(u.jsxs)("div",{className:"news-card",children:[Object(u.jsxs)("div",{className:"news-card__block-image",children:[Object(u.jsx)("img",{src:t?n.image:n.urlToImage,className:"news-card__image-main",onClick:t?function(){return window.open(n.link)}:function(){return window.open(n.url)},alt:"\u0444\u043e\u0442\u043e \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438"}),t&&Object(u.jsx)("div",{className:"news-card__keyword-block",children:Object(u.jsx)("span",{className:"news-card__keyword-text",children:n.keyword})}),Object(u.jsxs)("div",{className:"news-card__btn-block",onMouseEnter:function(e){return function(e){c(e)&&!a&&c(e).classList.remove("news-card__hint-login_closed")}(e)},onMouseLeave:function(e){return function(e){c(e)&&!a&&c(e).classList.add("news-card__hint-login_closed")}(e)},children:[Object(u.jsx)("button",{onClick:t?function(){r(n._id)}:function(e){!function(e){a?s(n):e.target.closest(".news-card__btn-block").querySelector(".news-card__hint-login").classList.toggle("news-card__hint-login_closed")}(e)},className:"".concat(t?"news-card__btn-delete":"news-card__btn-bookmark"," ").concat(!t&&n._id&&"news-card__btn-bookmark_active"),"aria-label":"bookmark",type:"button"}),!a&&Object(u.jsx)("div",{className:"news-card__hint-login news-card__hint-login_closed",children:Object(u.jsx)("span",{className:"news-card__text-hint",children:t?"\u0423\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445":"\u0412\u043e\u0439\u0434\u0438\u0442\u0435,  \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u0438"})})]})]}),Object(u.jsxs)("div",{className:"news-card__info-block",onClick:t?function(){return window.open(n.link)}:function(){return window.open(n.url)},children:[Object(u.jsx)("span",{className:"news-card__date",children:i(t?n.date:n.publishedAt)}),Object(u.jsx)("h3",{className:"news-card__title",children:n.title}),Object(u.jsx)("p",{className:"news-card__description",children:t?n.text:n.description}),Object(u.jsx)("span",{className:"news-card__source",children:t?n.source:n.source.name})]})]})};var k=function(e){var t=e.searchWithError,n=e.cards,a=e.onArticleSave,r=e.loggedIn,i=s.a.useState(3),c=Object(o.a)(i,2),l=c[0],d=c[1];return Object(u.jsxs)("section",{className:"news-card-list",children:[Object(u.jsx)("h2",{className:"news-card-list__title",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043f\u043e\u0438\u0441\u043a\u0430"}),t?Object(u.jsx)("p",{className:"news-card-list__description-error",children:"\u0412\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435\u043c \u0438\u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"news-card-list__cards",children:n.slice(0,l).map((function(e,t){return Object(u.jsx)(y,{card:e,onArticleSave:a,loggedIn:r},t)}))}),Object(u.jsx)("button",{type:"button",onClick:function(){var e=document.querySelector(".news-card-list__btn-show-more");d(l+3),n.length<=l+3&&e.classList.add("news-card-list__btn-show-more_closed")},className:"news-card-list__btn-show-more",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0435"})]})]})},w=n(12),S=n(11);n(46);var C=function(e){var t=e.cards,n=s.a.useContext(j),a=Object.entries(t.reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(w.a)({},t.keyword.toLowerCase(),(e[t.keyword.toLowerCase()]||0)+1))}),{})).sort((function(e,t){return t[1]-e[1]})).map((function(e){return e[0]})),r=a.splice(0,2).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(", ")+(a.length?a.length>1?" \u0438 ".concat(a.length,"-\u043c \u0434\u0440\u0443\u0433\u0438\u043c"):" \u0438 1-\u043c\u0443 \u0434\u0440\u0443\u0433\u043e\u043c\u0443":"");return Object(u.jsxs)("section",{className:"saved-news-header",children:[Object(u.jsx)("span",{className:"saved-news-header__info",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"}),Object(u.jsx)("h2",{className:"saved-news-header__title",children:"".concat(n.name,", \u0443 \u0432\u0430\u0441 ").concat(t.length," \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u0441\u0442\u0430\u0442\u0435\u0439")}),Object(u.jsxs)("span",{className:"saved-news-header__keyword",children:["\u041f\u043e \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u0441\u043b\u043e\u0432\u0430\u043c:",Object(u.jsxs)("span",{className:"saved-news-header__keyword-style",children:[" ",r]})]})]})};n(47);var L=function(e){var t=e.cards,n=e.onArticleDelete,a=e.loggedIn;return Object(u.jsx)("section",{className:"saved-news",children:Object(u.jsx)("div",{className:"saved-news__cards",children:t.map((function(e){return Object(u.jsx)(y,{savedCard:!0,card:e,onArticleDelete:n,loggedIn:a},e._id)}))})})};n(20),n(48);var E=function(e){var t=e.name,n=e.children,a=e.title,s=e.isOpen,r=e.onClose,i=e.onSubmit;return document.addEventListener("keydown",(function(e){"Escape"===e.key&&r()})),Object(u.jsx)("section",{onClick:function(e){e.target.classList.contains("popup-".concat(t))&&r()},className:"popup popup-".concat(t," ").concat(!s&&"popup_closed"),children:Object(u.jsxs)("form",{onSubmit:i,className:"popup__container",children:[Object(u.jsx)("span",{className:"popup__close",onClick:r}),Object(u.jsx)("h2",{className:"popup__title",children:a}),n]})})},I=function(e,t){var n=s.a.useState(e),r=Object(o.a)(n,2),i=r[0],c=r[1],l=s.a.useState(!1),u=Object(o.a)(l,2),d=u[0],_=u[1],h=s.a.useState(""),j=Object(o.a)(h,2),m=j[0],b=j[1],p=function(e,t){var n=s.a.useState(!0),r=Object(o.a)(n,2),i=r[0],c=r[1],l=s.a.useState(!1),u=Object(o.a)(l,2),d=u[0],_=u[1],h=s.a.useState(!1),j=Object(o.a)(h,2),m=j[0],b=j[1],p=s.a.useState(!1),g=Object(o.a)(p,2),f=g[0],O=g[1],v=s.a.useState(!1),x=Object(o.a)(v,2),N=x[0],y=x[1];return Object(a.useEffect)((function(){for(var n in t)switch(n){case"minLength":e.length<t[n]?_(!0):_(!1);break;case"isEmpty":c(!e);break;case"maxLength":e.length>t[n]?b(!0):b(!1);break;case"isEmail":/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())?O(!1):O(!0)}}),[e]),Object(a.useEffect)((function(){y(!(i||d||m||f))}),[i,d,m,f]),{isEmpty:i,isMinLengthError:d,isMaxLengthError:m,isEmailError:f,inputValid:N}}(i,t);return Object(S.a)({value:i,onChange:function(e){c(e.target.value),b(e.target.validationMessage)},onBlur:function(){_(!0)},isDirty:d,error:m},p)};var A=function(e){var t=e.isOpen,n=e.onClose,a=e.onRegister,r=e.handleLogin,i=s.a.useRef(),o=s.a.useRef(),l=I("",{isEmpty:!0,minLength:3,isEmail:!0}),d=I("",{isEmpty:!0,minLength:4,maxLength:8});return Object(u.jsxs)(E,{onSubmit:function(e){e.preventDefault(),r({email:i.current.value,password:o.current.value})},title:"\u0412\u0445\u043e\u0434",name:"login",isOpen:t,onClose:n,children:[Object(u.jsx)("span",{className:"login__signature-input login__signature-input_email",children:"Email"}),l.isDirty&&l.isEmpty&&Object(u.jsx)("span",{className:"login__input-error",children:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}),l.isDirty&&l.isEmailError&&Object(u.jsx)("span",{className:"login__input-error",children:l.error}),Object(u.jsx)("input",{onChange:function(e){return l.onChange(e)},onBlur:function(e){return l.onBlur(e)},value:l.value,ref:i,type:"email",className:"login__input login__input_email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443"}),Object(u.jsx)("span",{className:"login__signature-input login__signature-input_password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),d.isDirty&&d.isEmpty&&Object(u.jsx)("span",{className:"login__input-error",children:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}),d.isDirty&&d.isMinLengthError&&Object(u.jsx)("span",{className:"login__input-error",children:d.error}),d.isDirty&&d.isMaxLengthError&&Object(u.jsx)("span",{className:"login__input-error",children:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(u.jsx)("input",{onChange:function(e){return d.onChange(e)},onBlur:function(e){return d.onBlur(e)},value:d.value,ref:o,type:"password",required:!0,minLength:"4",className:"login__input login__input_email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(u.jsx)("button",{type:"submit",disabled:!l.inputValid||!d.inputValid,className:l.inputValid&&d.inputValid?"login__btn-submit login__btn-submit_active":"login__btn-submit",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(u.jsx)("div",{className:"login__block-link",children:Object(u.jsxs)("span",{className:"login__issue",children:["\u0438\u043b\u0438",Object(u.jsx)(c.b,{to:"/",onClick:a,className:"login__link",children:" \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})})]})};n(49);var D=function(e){var t=e.isOpen,n=e.onClose,a=e.onLogin,r=e.handleRegister,i=s.a.useRef(),o=s.a.useRef(),l=s.a.useRef(),d=I("",{isEmpty:!0,minLength:3,isEmail:!0}),_=I("",{isEmpty:!0,minLength:4,maxLength:8}),h=I("",{isEmpty:!0,minLength:2,maxLength:8});return Object(u.jsxs)(E,{name:"register",onSubmit:function(e){e.preventDefault(),r({email:i.current.value,password:o.current.value,name:l.current.value})},title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",isOpen:t,onClose:n,children:[Object(u.jsx)("span",{className:"login__signature-input login__signature-input_email",children:"Email"}),d.isDirty&&d.isEmpty&&Object(u.jsx)("span",{className:"login__input-error",children:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}),d.isDirty&&d.isEmailError&&Object(u.jsx)("span",{className:"login__input-error",children:d.error}),Object(u.jsx)("input",{onChange:function(e){return d.onChange(e)},onBlur:function(e){return d.onBlur(e)},value:d.value,ref:i,type:"email",required:!0,className:"login__input login__input_email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443"}),Object(u.jsx)("span",{className:"login__signature-input login__signature-input_password",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),_.isDirty&&_.isEmpty&&Object(u.jsx)("span",{className:"login__input-error",children:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}),_.isDirty&&_.isMinLengthError&&Object(u.jsx)("span",{className:"login__input-error",children:_.error}),_.isDirty&&_.isMaxLengthError&&Object(u.jsx)("span",{className:"login__input-error",children:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(u.jsx)("input",{onChange:function(e){return _.onChange(e)},onBlur:function(e){return _.onBlur(e)},value:_.value,ref:o,type:"password",required:!0,minLength:"4",className:"login__input login__input_email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(u.jsx)("span",{className:"login__signature-input login__signature-input_name",children:"\u0418\u043c\u044f"}),h.isDirty&&h.isEmpty&&Object(u.jsx)("span",{className:"login__input-error",children:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"}),h.isDirty&&h.isMinLengthError&&Object(u.jsx)("span",{className:"login__input-error",children:h.error}),h.isDirty&&h.isMaxLengthError&&Object(u.jsx)("span",{className:"login__input-error",children:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043e\u0435 \u0438\u043c\u044f"}),Object(u.jsx)("input",{onChange:function(e){return h.onChange(e)},onBlur:function(e){return h.onBlur(e)},value:h.value,ref:l,type:"text",required:!0,minLength:"2",className:"login__input login__input_name",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0435 \u0438\u043c\u044f"}),Object(u.jsx)("button",{type:"submit",disabled:!d.inputValid||!_.inputValid||!h.inputValid,className:d.inputValid&&_.inputValid&&h.inputValid?"login__btn-submit login__btn-submit_active":"login__btn-submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(u.jsx)("div",{className:"login__block-link",children:Object(u.jsxs)("span",{className:"login__issue",children:["\u0438\u043b\u0438",Object(u.jsx)(c.b,{to:"/",onClick:a,className:"login__link",children:" \u0412\u043e\u0439\u0442\u0438"})]})})]})};n(50);var q=function(e){var t=e.search,n=e.closed;return Object(u.jsxs)("section",{className:"preloader ".concat(n&&"preloader_closed"),children:[Object(u.jsx)("span",{className:t?"preloader__circle":"preloader__error-result"}),!t&&Object(u.jsx)("h2",{className:"preloader__title",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),Object(u.jsx)("span",{className:t?"preloader__description":"preloader__description preloader__description_error-result",children:t?"\u0418\u0434\u0435\u0442 \u043f\u043e\u0438\u0441\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439...":"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."})]})},M=n(13),T=n(14),B=new(function(){function e(t){var n=t.url,a=t.apiKey,s=t.headers;Object(M.a)(this,e),this.url=n,this.apiKey=a,this.headers=s}return Object(T.a)(e,[{key:"getResultSearch",value:function(e){var t=new Date;return fetch("".concat(this.url,"?q=").concat(e,"&apiKey=").concat(this.apiKey,"&from=").concat(t.getDate()-7,"&to=").concat(t.getDate(),"&pageSize=100")).then((function(e){return e.json()}))}}]),e}())({url:"https://newsapi.org/v2/everything",apiKey:"93f559ad46574d7a942016b0b7173fd5",headers:{"Content-Type":"application/json"}}),R=new(function(){function e(t){var n=t.url,a=t.headers;Object(M.a)(this,e),this.url=n,this.headers=a}return Object(T.a)(e,[{key:"getSavedArticlesOfUser",value:function(){return this._updateToken(),fetch("".concat(this.url,"/articles"),{method:"GET",headers:this.headers}).then((function(e){return e.json()}))}},{key:"saveArticle",value:function(e){return fetch("".concat(this.url,"/articles"),{method:"POST",headers:this.headers,body:JSON.stringify({keyword:localStorage.getItem("requestOfUser"),title:e.title,text:e.description,date:e.publishedAt,source:e.source.name,link:e.url,image:e.urlToImage})}).then((function(e){return e.json()}))}},{key:"deleteArticle",value:function(e){return fetch("".concat(this.url,"/articles/").concat(e),{method:"DELETE",headers:this.headers})}},{key:"_updateToken",value:function(){var e=localStorage.getItem("token");e&&(localStorage.setItem("token",e),this.headers={Authorization:e,"Content-Type":"application/json"})}}]),e}())({url:"https://v1ktorbro.students.nomoreparties.xyz",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});var V=function(e){var t=e.onLogin,n=e.isOpen,a=e.onClose;return Object(u.jsx)(E,{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d!",name:"success-register",isOpen:n,onClose:a,children:Object(u.jsx)("div",{className:"login__block-link",children:Object(u.jsx)("span",{className:"login__issue",children:Object(u.jsx)(c.b,{to:"/",onClick:t,className:"login__link",children:" \u0412\u043e\u0439\u0442\u0438"})})})})},U="https://v1ktorbro.students.nomoreparties.xyz",z=function(e){return fetch("".concat(U,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()}))};var J=function(e){var t=e.Component,n=e.loggedIn;return Object(u.jsx)(l.b,{children:function(){return n?t:Object(u.jsx)(l.a,{to:"/"})}})};var P=function(){var e=s.a.useState(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],r=s.a.useState(!1),i=Object(o.a)(r,2),c=i[0],_=i[1],h=s.a.useState(!1),b=Object(o.a)(h,2),g=b[0],O=b[1],v=s.a.useState(!1),x=Object(o.a)(v,2),y=x[0],w=x[1],S=s.a.useState([]),E=Object(o.a)(S,2),I=E[0],M=E[1],T=s.a.useState([]),P=Object(o.a)(T,2),K=P[0],F=P[1],G=s.a.useState(!1),W=Object(o.a)(G,2),Z=W[0],$=W[1],H=s.a.useState(!1),Q=Object(o.a)(H,2),X=Q[0],Y=Q[1],ee=s.a.useState(!1),te=Object(o.a)(ee,2),ne=te[0],ae=te[1],se=s.a.useState({}),re=Object(o.a)(se,2),ie=re[0],ce=re[1],oe=s.a.useState(!1),le=Object(o.a)(oe,2),ue=le[0],de=le[1],_e=function(){$(!0),Y(!1)},he=function(){$(!1),Y(!1),ae(!1)},je=function(e){localStorage.setItem("requestOfUser",e),a(!0),O(!1),_(!1),w(!1),B.getResultSearch(e).then((function(e){"ok"===e.status?(a(!1),O(!0),M(e.articles)):(w(!0),a(!1)),0===e.totalResults&&(_(!0),O(!1))})).catch((function(e){console.log(e)}))},me=function(e,t){var n=e.map((function(e){var n=t.find((function(t){return a=e,(n=t).text===a.description&&n.title===a.title&&n.source===a.source.name;var n,a}));return n&&!e._id?e._id=n._id:!n&&e._id&&delete e._id,e}));M(n),localStorage.setItem("articles",JSON.stringify(n))};s.a.useEffect((function(){var e=localStorage.getItem("requestOfUser"),t=JSON.parse(localStorage.getItem("articles")),n=localStorage.getItem("token");!function(){var e=localStorage.getItem("token");e&&z(e).then((function(e){return ce(e),de(!0)})).catch((function(e){return console.log(e)}))}(),n&&R.getSavedArticlesOfUser().then((function(e){return F(e),me(t,e)})).catch((function(e){return console.log(e)})),e&&je(e)}),[]);var be=function(){localStorage.removeItem("token"),de(!1)};return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(j.Provider,{value:ie,children:[Object(u.jsxs)(l.b,{exact:!0,path:"/",children:[Object(u.jsx)(A,{isOpen:Z,onClose:he,onRegister:function(){Y(!0),$(!1)},handleLogin:function(e){(function(e){var t=e.email,n=e.password;return fetch("".concat(U,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((function(e){if(200===e.status)return e.json()})).then((function(e){if(e.token)return localStorage.setItem("token",e.token),e}))})(e).then((function(e){if(e.token){var t=localStorage.getItem("token");z(t).then((function(e){e&&(ce(e),he(),de(!0))})),R.getSavedArticlesOfUser().then((function(e){F(e),me(I,e)}))}})).catch((function(e){return console.log(e)}))}}),Object(u.jsx)(D,{isOpen:X,onClose:he,onLogin:_e,handleRegister:function(e){(function(e){var t=e.email,n=e.password,a=e.name;return fetch("".concat(U,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:t,password:n,name:a})}).then((function(e){if(201===e.status)return e.json()}))})(e).then((function(e){e&&(Y(!1),ae(!0))})).catch((function(e){return console.log(e)}))}}),ne&&Object(u.jsx)(V,{onClose:he,onLogin:function(){ae(!1),_e()},isOpen:ne}),Object(u.jsx)(d,{onMain:!0,children:Object(u.jsx)(m,{onMain:!0,loggedIn:ue,onLogin:_e,signOut:be})}),Object(u.jsx)(p,{onSearchNews:je}),n?Object(u.jsx)(q,{search:!0}):Object(u.jsx)(q,{closed:!0}),c?Object(u.jsx)(q,{}):Object(u.jsx)(q,{closed:!0}),g&&Object(u.jsx)(k,{cards:I,onArticleSave:function(e){R.saveArticle(e).then((function(e){e&&R.getSavedArticlesOfUser().then((function(e){F(e),me(I,e)}))})).catch((function(e){return console.log(e)}))},loggedIn:ue}),y&&Object(u.jsx)(k,{searchWithError:!0}),Object(u.jsx)(f,{})]}),Object(u.jsx)(J,{path:"/",loggedIn:ue,onLogin:_e,Component:Object(u.jsxs)(l.b,{path:"/saved-news",children:[Object(u.jsx)(d,{children:Object(u.jsx)(m,{loggedIn:ue,signOut:be,savedNews:!0})}),Object(u.jsx)(C,{cards:K}),Object(u.jsx)(L,{cards:K,onArticleDelete:function(e){R.deleteArticle(e).then((function(e){e&&R.getSavedArticlesOfUser().then((function(e){F(e),me(I,e)}))})).catch((function(e){return console.log(e)}))},loggedIn:ue})]})})]}),Object(u.jsx)(N,{})]})};i.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(c.a,{children:Object(u.jsx)(P,{})})}),document.getElementById("root"))}]),[[51,1,2]]]);
//# sourceMappingURL=main.9ae8302a.chunk.js.map